<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hospital Dashboard - BloodConnect</title>
<style>
  body { margin: 0; font-family: Arial, sans-serif; background: #f4f6f8; color: #333; }
  header { background: #e63946; color: white; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  header h2 { margin: 0; }
  nav a { color: white; margin-left: 20px; text-decoration: none; font-weight: bold; }
  nav a:hover { text-decoration: underline; }

  .container { max-width: 1200px; margin: 30px auto; padding: 20px; }
  #welcomeMessage { font-size: 1.8em; margin-bottom: 20px; color: #e63946; }

  /* Blood Units Cards */
  .blood-units { display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 40px; }
  .unit-card { background: white; flex: 1 1 120px; text-align: center; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); transition: transform 0.3s ease; }
  .unit-card:hover { transform: translateY(-5px); }
  .unit-card h3 { margin: 0; color: #e63946; font-size: 1.2em; }
  .unit-card p { font-size: 1.5em; font-weight: bold; margin: 10px 0 0; color: #444; }

  /* Search Bar */
  .search-bar { margin-bottom: 40px; }
  .search-bar input { width: 300px; padding: 10px; border-radius: 5px; border: 1px solid #ccc; margin-right: 10px; }
  .search-bar button { padding: 10px 20px; background: #e63946; color: white; border: none; border-radius: 5px; cursor: pointer; }
  .search-bar button:hover { background: #b71c1c; }

  table { width: 100%; border-collapse: collapse; margin-top: 20px; background: white; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  th, td { border: 1px solid #ddd; padding: 12px; text-align: center; }
  th { background: #e63946; color: white; }

  button { padding: 8px 15px; background: #e63946; color: white; border: none; border-radius: 5px; cursor: pointer; transition: background 0.3s; }
  button:hover { background: #b71c1c; }

  @media(max-width:768px){
    .blood-units { flex-direction: column; }
    .search-bar input { width: 100%; margin-bottom: 10px; }
    .search-bar button { width: 100%; }
  }
</style>
</head>
<body>

<header>
  <h2>BloodConnect - Hospital Dashboard</h2>
  <nav>
    <a href="index.html">Home</a>
    <a href="#" onclick="logout()">Logout</a>
  </nav>
</header>

<div class="container">
  <h1 id="welcomeMessage"></h1>
<div style="margin: 20px 0;">
  <button id="openAdminPanelBtn">Open Admin Panel</button>
</div>

  <!-- Hospital Blood Units -->
  <h3>Your Available Blood Units</h3>
  <div class="blood-units" id="hospitalUnits"></div>

  <!-- Search Nearby Hospitals -->
  <div class="search-bar">
    <input type="text" id="searchLocation" placeholder="Enter location to find hospitals">
    <button onclick="searchNearbyHospitals()">Search</button>
  </div>

  <h3>Nearby Hospitals with Available Blood</h3>
  <table id="nearbyHospitals">
    <tr>
      <th>Hospital Name</th>
      <th>Blood Units</th>
      <th>Location</th>
      <th>Contact</th>
    </tr>
  </table>

  <h3>Donor Requests</h3>
  <table>
    <tr>
      <th>Donor</th>
      <th>Contact</th>
      <th>Blood Group</th>
      <th>Location</th>
      <th>Action</th>
    </tr>
    <tr>
      <td>John Doe</td>
      <td>+1 234 567 890</td>
      <td>A+</td>
      <td>New York</td>
      <td><button>Contact</button></td>
    </tr>
    <tr>
      <td>Mary Smith</td>
      <td>+1 555 666 777</td>
      <td>O-</td>
      <td>Chicago</td>
      <td><button>Contact</button></td>
    </tr>
  </table>
</div>

<script>
  // Get hospital info from localStorage
// Get hospital info from localStorage
const hospitalName = localStorage.getItem('name') || 'My Hospital';
const hospitalBlood = JSON.parse(localStorage.getItem('blood') || '[]');
const hospitalLocation = localStorage.getItem('location') || 'New York';

// Display welcome message
document.getElementById('welcomeMessage').innerText = `Welcome, ${hospitalName}!`;

// Display hospital's blood units
const unitsContainer = document.getElementById('hospitalUnits');
unitsContainer.innerHTML = '';

if (hospitalBlood.length === 0) {
    unitsContainer.innerHTML = '<p>No blood units registered.</p>';
} else {
    hospitalBlood.forEach(unit => {
        const card = document.createElement('div');
        card.classList.add('unit-card');

        // Safely handle both string and object formats
        if (typeof unit === 'string') {
            card.innerHTML = `<h3>${unit}</h3><p>Units not specified</p>`;
        } else if (unit && unit.type) {
            const unitsText = unit.units !== undefined ? `${unit.units} units` : 'Units not specified';
            card.innerHTML = `<h3>${unit.type}</h3><p>${unitsText}</p>`;
        } else {
            card.innerHTML = `<h3>Unknown</h3><p>Units not specified</p>`;
        }

        unitsContainer.appendChild(card);
    });
}

// Logout function
function logout() {
    localStorage.clear();
    window.location.href = 'index.html';
}

// Search nearby hospitals (dummy data)
function searchNearbyHospitals() {
    const location = document.getElementById('searchLocation').value.trim();
    const table = document.getElementById('nearbyHospitals');

    // Reset table header
    table.innerHTML = `<tr>
      <th>Hospital Name</th>
      <th>Blood Units</th>
      <th>Location</th>
      <th>Contact</th>
    </tr>`;

    if (!location) {
        alert('Enter a location');
        return;
    }

    const dummyHospitals = [
        { name: 'City Hospital', blood: ['O+', 'A+'], location: location, contact: '+1 111 222 333' },
        { name: 'HealthCare Center', blood: ['B+', 'AB+'], location: location, contact: '+1 444 555 666' },
        { name: 'LifeSave Hospital', blood: ['O-', 'A-'], location: location, contact: '+1 777 888 999' }
    ];

    dummyHospitals.forEach(hospital => {
        const row = table.insertRow();
        row.insertCell().innerText = hospital.name;
        row.insertCell().innerText = hospital.blood.join(', ');
        row.insertCell().innerText = hospital.location;
        row.insertCell().innerHTML = `<button onclick="contactHospital('${hospital.contact}')">Contact</button>`;
    });
}

// Contact hospital
function contactHospital(contact) {
    alert(`Contact: ${contact}`);
}
document.getElementById('openAdminPanelBtn').addEventListener('click', () => {
    // Redirect to admin page
    window.location.href = 'hospital-admin.html';
});

</script>

</body>
</html>
